---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { render } from "astro:content";
import { Breadcrumbs } from "astro-breadcrumbs";
import { ClientRouter } from "astro:transitions";
import "astro-breadcrumbs/breadcrumbs.css";
import "../../styles/global.css";

const customLastPart = [
  { index: "ultima", text: "Ultima Pagina!" },
  { "data-link": "inicio", "aria-label": "Volver al Inicio", text: "Inicio" },
  { "data-link": "quienes-somos", "aria-label": "Ir a Qui√©nes Somos", text: "Quienes Somos" }
];

export async function getStaticPaths() {
  const especialidades = await getCollection("especialidades");
  return especialidades.map((especialidad) => ({
    params: { id: especialidad.slug },
    props: { especialidad },
  }));
}

const { especialidad } = Astro.props;
const { data, slug } = especialidad;
const { title, description, descriptionLarge, horarios, nombre, matricula, seoTitle, seoDescription, imagen } = data;
const { Content } = await render(especialidad);
---

<Layout title={`${title} - Especialidades M√©dicas`}>
  <ClientRouter />
  <!-- üîπ SEO Meta Tags -->
  <head>
    <title>{seoTitle}</title>
    <meta name="description" content={seoDescription} />
  </head>

  <!-- üîπ Secci√≥n de Imagen de Fondo con T√≠tulo -->
  <section class="relative w-full min-h-[30vh] flex items-center justify-center text-white">
    <div class="absolute inset-0">
      <img
        transition:name={`imagen-${especialidad.slug}`}
        src={`/especialidades/${especialidad.slug}.png`}
        alt={`Imagen de ${especialidad.data.title}`}
        class="w-full h-full object-cover"
        loading="lazy"
      />
      <div class="absolute inset-0 bg-gray-900 opacity-50"></div>
    </div>
    <div class="relative z-10 max-w-3xl text-center px-4 py-8">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold">{title}</h1>
    </div>
  </section>

  <!-- üîπ Contenido Principal -->
  <section class="max-w-5xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <div class="mb-6">
      <Breadcrumbs ariaLabel="Navegacion" class="text-center" />
    </div>

    <!-- üîπ Informaci√≥n General -->
    <div class="bg-white shadow-lg rounded-lg p-6 mb-8 border border-gray-200">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">‚ÑπÔ∏è Informaci√≥n General</h2>
      <p class="text-gray-700 mb-4">{descriptionLarge}</p>
      <p class="text-gray-600"><strong>‚åö Horarios:</strong> {horarios}</p>
    </div>

    <!-- üîπ Profesionales a Cargo -->
    {data.profesionales && data.profesionales.length > 0 && (
      <div class="mt-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">üë®‚Äç‚öïÔ∏è Profesionales</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {data.profesionales.map((profesional) => (
            <div class="bg-white shadow-md rounded-lg p-4 border-l-4 border-blue-500">
              <h3 class="text-md font-semibold text-gray-900">{profesional.nombre}</h3>
              <p class="text-gray-600">{profesional.especialidad}</p>
              <p class="text-sm text-gray-500">üÜî Matr√≠cula: {profesional.matricula}</p>
              <p class="text-sm text-gray-500">üïí {profesional.horarios}</p>
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- üîπ Bot√≥n para Contacto -->
    <div class="mt-10 text-center">
      <a
        href="/contacto"
        class="bg-blue-600 hover:bg-blue-700 transition-all duration-300 text-white font-medium text-lg px-6 py-3 rounded-lg shadow-md"
      >
<a href="http://"></a>      </a>
    </div>
  </section>
</Layout>

<style>
  .bg-total {
    background-image: url("../images/med-2.jpg");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
</style>

<!-- ---
import { getCollection } from "astro:content";

import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const especialidades = await getCollection("especialidades");
    console.log(especialidades)

    return especialidades.map((especialidad) => ({
        params: { id: especialidad.slug },
        props: { especialidad }
         
    }))
}

const { especialidad } = Astro.props
const { data } = especialidad
const { title, description, horarios, nombre, matricula,  seoTitle, seoDescription } = data

---


<Layout title={`${title} - Especialidades M√©dicas`}>
  <section class="max-w-7xl mx-auto py-12 px-6">
    <h1 class="text-3xl font-bold text-center text-gray-900 mb-10">{title}</h1>

    



  </section>
</Layout>
 -->
