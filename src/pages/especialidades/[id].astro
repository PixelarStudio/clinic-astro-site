---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import "../../styles/global.css";
import { render } from "astro:content";

export async function getStaticPaths() {
  const especialidades = await getCollection("especialidades");

  return especialidades.map((especialidad) => ({
    params: { id: especialidad.slug },
    props: { especialidad },
  }));
}

const { especialidad } = Astro.props;
const { data, slug } = especialidad;
const {
  title,
  description,
  descriptionLarge,
  horarios,
  nombre,
  matricula,
  seoTitle,
  seoDescription,
  imagen,
} = data;

const { Content } = await render(especialidad);
---

<Layout title={`${title} - Especialidades MÃ©dicas`}>
  <!-- ğŸ”¹ SEO Meta Tags -->
  <head>
    <title>{seoTitle}</title>
    <meta name="description" content={seoDescription} />
  </head>

  <!-- ğŸ”¹ Imagen de Fondo -->
  <section
    class="relative w-full min-h-[30vh] flex items-center justify-center text-white b"
  >
    <div class="absolute inset-0 bg-opacity-80">
      <img
        transition:name={`imagen-${especialidad.slug}`}
        src={`/especialidades/${especialidad.slug}.png`}
        alt={`Imagen de ${especialidad.data.title}`}
        class="w-full h-70 object-cover rounded-t-lg"
        loading="lazy"
      />
    </div>
    <div class="absolute inset-0 bg-cover bg-center bg-no-repeat"></div>

    <div
      class="relative z-100 max-w-3xl text-center border-2 px-30 py-8 opacity-65 rounded-lg shadow-lg bg-gray-500"
    >
      <h1 class="text-3xl text-white font-extrabold ">{title}</h1>
    </div>
  </section>

  <section class="max-w-7xl mx-auto py-12 px-6 prose">
    <!-- ğŸ”¹ InformaciÃ³n General -->
    <div class="bg-white shadow-xl rounded-lg p-6 border border-gray-200 mb-8">
      <h2 class="text-2xl font-semibold text-gray-800 flex items-center">
        â„¹ï¸ InformaciÃ³n General
        <h3 class="text-pretty text-black py-10 font-extrabold ">{descriptionLarge}</h3>

      </h2>
      <p class="text-gray-600 mt-2"><strong>âŒš Horarios:</strong> {horarios}</p>
    </div>

    <!-- ğŸ”¹ Profesionales a Cargo -->
    {
      data.profesionales && data.profesionales.length > 0 && (
        <div class="mt-8">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">
            ğŸ‘¨â€âš•ï¸ Profesionales
          </h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            {data.profesionales.map((profesional) => (
              <div class="bg-white shadow-md rounded-lg p-4 border-l-4 border-blue-500">
                <h3 class="text-lg font-semibold text-gray-900">
                  {profesional.nombre}
                </h3>
                <p class="text-gray-600">{profesional.especialidad}</p>
                <p class="text-sm text-gray-500">
                  ğŸ†” MatrÃ­cula: {profesional.matricula}
                </p>
                <p class="text-sm text-gray-500">ğŸ•’ {profesional.horarios}</p>
              </div>
            ))}
          </div>
        </div>
      )
    }

    <!-- ğŸ”¹ BotÃ³n para Contacto -->
    <div class="mt-10 text-center">
      <a
        href="/contacto"
        class="bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-medium shadow-md transition-all hover:bg-blue-700"
      >
        ğŸ“ Solicitar Turno
      </a>
    </div>
  </section>
</Layout>

<style>
  .bg-total {
    background-image: url("../images/med- 2.jpg");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
</style>
<!-- ---
import { getCollection } from "astro:content";

import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const especialidades = await getCollection("especialidades");
    console.log(especialidades)

    return especialidades.map((especialidad) => ({
        params: { id: especialidad.slug },
        props: { especialidad }
         
    }))
}

const { especialidad } = Astro.props
const { data } = especialidad
const { title, description, horarios, nombre, matricula,  seoTitle, seoDescription } = data

---


<Layout title={`${title} - Especialidades MÃ©dicas`}>
  <section class="max-w-7xl mx-auto py-12 px-6">
    <h1 class="text-3xl font-bold text-center text-gray-900 mb-10">{title}</h1>

    



  </section>
</Layout>
 -->
